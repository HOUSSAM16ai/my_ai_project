# .env.example - The Unified Brain Protocol (Professional Template v4.0)
# Copy this file to .env and replace placeholders with your actual values

# --- Flask Application Settings ---
FLASK_DEBUG=1
SECRET_KEY="your-super-secret-flask-key-here"


# --- [THE UNIFIED BRAIN - SUPABASE] ---
# These variables connect our application to its immortal, unified brain.

# 1. Supabase API Credentials
SUPABASE_URL="https://your-project-id.supabase.co"
SUPABASE_KEY="your-supabase-anon-key-here"

# 2. Unified Database Connection String (Session Pooler Protocol - IPv4 SAFE)
# This URL uses the Session Pooler, which is designed for environments like this.
DATABASE_URL="postgresql://postgres.your-project-id:your-db-password@aws-0-region.pooler.supabase.com:5432/postgres"


# --- AI Engine Settings ---
OPENROUTER_API_KEY="sk-or-v1-your-openrouter-api-key-here"


# --- [THE AUTOMATIC SEEDING PROTOCOL] ---
ADMIN_EMAIL="admin@yourproject.com"
ADMIN_PASSWORD="your-secure-admin-password"
ADMIN_NAME="Your Name Here"




# ====== Root & Logging ======
AGENT_TOOLS_PROJECT_ROOT=.
AGENT_TOOLS_LOG_LEVEL=INFO
LLM_PLANNER_LOG_LEVEL=DEBUG
OVERMIND_LOG_DEBUG=1
LOG_FORMAT_JSON=0
LOG_REQUEST_ID_ENABLE=1
LOG_INCLUDE_TIMESTAMPS=1

# ====== Planner Core ======
PLANNER_FORCE_ARABIC=0
PLANNER_LANGUAGE_FALLBACK=ar
PLANNER_MAX_FILES=12
PLANNER_DEFAULT_EXT=.md
PLANNER_SMART_FILENAME=1
PLANNER_ALLOW_SUBDIRS=1
PLANNER_MAX_TASKS_GLOBAL=400

# ====== Streaming / Chunking ======
PLANNER_STREAMING_ENABLE=1
PLANNER_ALLOW_APPEND_TOOL=auto
PLANNER_APPEND_FALLBACK_BATCH=1
PLANNER_CHUNK_SIZE_HINT=1200
PLANNER_MAX_CHUNKS=50
PLANNER_HARD_LINE_CAP=1000000
PLANNER_FAST_SINGLE_THRESHOLD=1800

# ====== Roles / Sections / Hints ======
PLANNER_ENABLE_SECTION_INFERENCE=1
PLANNER_ENABLE_ROLE_DERIVATION=1
PLANNER_MULTI_ROLE_JSON=1
PLANNER_ENABLE_CODE_HINTS=1

# ====== Enforcement / Artifact Index ======
PLANNER_ENSURE_FILE=1
PLANNER_STRICT_WRITE_ENFORCE=1
PLANNER_INDEX_FILE=1
PLANNER_INDEX_NAME=ARTIFACT_INDEX.md

# ====== Deep Structural Index ======
PLANNER_DEEP_INDEX_ENABLE=1
PLANNER_DEEP_INDEX_JSON=1
PLANNER_DEEP_INDEX_JSON_NAME=STRUCTURAL_INDEX.json
PLANNER_DEEP_INDEX_MD=1
PLANNER_DEEP_INDEX_MD_NAME=STRUCTURAL_INDEX_SUMMARY.md
PLANNER_DEEP_INDEX_MAX_JSON_BYTES=180000
PLANNER_DEEP_INDEX_SUMMARY_MAX_LEN=3800

# ====== Repo Scan ======
PLANNER_ALLOW_LIST_READ_ANALYSIS=1
PLANNER_CORE_READ_FILES=README.md,requirements.txt,Dockerfile,config.py,pyproject.toml

# ====== Allowed Tools ======
PLANNER_ALLOWED_TOOLS=list_dir,read_file,ensure_file,generic_think,write_file,append_file
PLANNER_ENFORCE_ALLOWED_TOOLS=1

# ====== Optional Future Flags (keep if you’ll implement later) ======
PLANNER_DEP_AUDIT_ENABLE=1
PLANNER_BACKLOG_MODE_ENABLE=1

# ====== Legacy L4 (if still used) ======
PLANNER_L4_ENABLED=1
PLANNER_L4_SCAN_DIRS=app,.
PLANNER_L4_MAX_LIST_DIRS=4
PLANNER_L4_CORE_FILES=README.md,requirements.txt,docker-compose.yml,config.py,Dockerfile
PLANNER_L4_INCLUDE_CODE_EXTS=.py,.md,.yml,.yaml,.toml,.json,.txt,.ini,.cfg
PLANNER_L4_MAX_CODE_FILES=12
PLANNER_L4_MAX_TOTAL_READS=24
PLANNER_L4_MULTI_ANALYSIS=1
PLANNER_L4_ENABLE_ENSURE=1
PLANNER_L4_FINAL_FILENAME_HINT=ARCHITECTURE_PRINCIPLES.md
PLANNER_L4_MIN_SYNTH_SECTIONS=6
PLANNER_L4_PRIORITY_KEYWORDS=service,api,model,config,core,main,router,controller
OVERMIND_L4_SOFT_MISSING_FILES=1
OVERMIND_L4_MISSING_FILE_MARKER="[MISSING]"
OVERMIND_L4_EXPECT_ARCH_FILE=ARCHITECTURE_PRINCIPLES.md

# ====== File & Guard Defaults ======
PLANNER_FILE_DEFAULT_EXT=.md
PLANNER_FILE_DEFAULT_CONTENT="(auto-generated placeholder)"
PLANNER_FORCE_REPORT_NAME=ARCHITECTURE_PRINCIPLES.md
OVERMIND_GUARD_ENABLED=1
OVERMIND_GUARD_FILE_AUTOFIX=1
OVERMIND_GUARD_ACCEPT_DOTTED=1
OVERMIND_GUARD_FORCE_FILE_INTENT=1
OVERMIND_GUARD_FILE_DEFAULT_EXT=.md
OVERMIND_GUARD_FILE_DEFAULT_CONTENT="(auto-generated placeholder)"

# ====== Interpolation ======
OVERMIND_INTERPOLATION_ENABLED=1
OVERMIND_ALLOW_TEMPLATE_FAILURE=1  # ضع 0 للإنتاج الصارم

# ====== Diffs / Backups ======
OVERMIND_DIFF_ENABLED=1
OVERMIND_BACKUP_ON_WRITE=0

# ====== Tools Runtime Limits ======
AGENT_TOOLS_CREATE_MISSING=1
AGENT_TOOLS_CREATE_ALLOWED_EXTS=.md,.txt,.json,.log
AGENT_TOOLS_CREATE_DEFAULT_CONTENT="Auto-generated placeholder file."
AGENT_TOOLS_CREATE_MAX_BYTES=300000
AGENT_TOOLS_MAX_WRITE_BYTES=5000000
AGENT_TOOLS_MAX_APPEND_BYTES=3000000
AGENT_TOOLS_MAX_READ_BYTES=800000
AGENT_TOOLS_APPEND_ENFORCE_TOTAL=1
AGENT_TOOLS_AUTOFILL_MISSING=1
AGENT_TOOLS_AUTOFILL_EXTENSION=.txt
AGENT_TOOLS_ACCEPT_DOTTED=1
AGENT_TOOLS_FORCE_INTENT=1
AGENT_TOOLS_HASH_AFTER_WRITE=1
AGENT_TOOLS_COMPRESS_JSON=1

# ====== Security / Safety ======
PLANNER_DISABLE_DELETE=1
PLANNER_PROTECTED_DIRS=app/overmind/planning,app/services
SAFE_GUARD_MAX_INTERPOLATION_REF=150
SAFE_GUARD_MAX_CHAIN_DEPTH=40
DISABLE_UNSAFE_EVAL=1
ENFORCE_CONTENT_POLICY=1
FORBID_RAW_SYSTEM_PROMPTS_EXPORT=1

# ====== Kill Switches ======
DISABLE_STREAMING_MODE=0
DISABLE_ROLE_DERIVATION=0
DISABLE_SECTION_INFERENCE=0

# ====== Feature Flags ======
FEATURE_FLAG_MISSION_TIMELINE=1
FEATURE_FLAG_INSIGHT_SUMMARY=1
FEATURE_FLAG_LLM_COST_TRACKING=1

# ====== Models (adjust to actual names) ======
LOW_COST_MODEL="openai/gpt-4o-mini"
PLANNER_THINK_MODEL_PRIMARY=${DEFAULT_AI_MODEL}
PLANNER_THINK_MODEL_FAST=${LOW_COST_MODEL}
PLANNER_DISABLE_VERBOSE_PROMPTS=0

# ====== Observability (optional) ======
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_SERVICE_NAME="cogniforge-overmind"
METRICS_ENABLE=1
TRACE_ENABLE=0

# ====== Rate Limiting (optional) ======
RATE_LIMIT_ENABLED=0
RATE_LIMIT_MISSION_PER_MIN=20
RATE_LIMIT_TASKS_PER_MIN=200

# ====== Reserved (future) ======
RESERVED_FLAG_ALPHA=0
RESERVED_FLAG_BETA=0
FALLBACK_ALLOW=1
# Database Management System Documentation

## ูุธุงู ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช - CogniForge

### Overview
ุชู ุฅุถุงูุฉ ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุตูุญุฉ ุงูุฃุฏูู. ูุชูุญ ูู ูุฐุง ุงููุธุงู ุงูุชุญูู ุงููุงูู ูู ุฌููุน ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู Supabase.

### Features / ุงููููุฒุงุช

#### 1. ุนุฑุถ ุดุงูู ููุฌุฏุงูู (Table Overview)
- ูุงุฆูุฉ ุจุฌููุน ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุนุฏุฏ ุงูุณุฌูุงุช ูู ูู ุฌุฏูู
- ุฅุญุตุงุฆูุงุช ุดุงููุฉ ูููุงุนุฏุฉ

#### 2. ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช (Data Management)
- **ุนุฑุถ ุงูุจูุงูุงุช**: ุงุณุชุนุฑุงุถ ุฌููุน ุงูุณุฌูุงุช ูู ุฃู ุฌุฏูู ูุน ุชุฑููู ุงูุตูุญุงุช
- **ุชุนุฏูู ุงูุณุฌูุงุช**: ุชุญุฏูุซ ุฃู ุณุฌู ูุจุงุดุฑุฉ ูู ุงููุงุฌูุฉ
- **ุญุฐู ุงูุณุฌูุงุช**: ุญุฐู ุงูุณุฌูุงุช ุบูุฑ ุงููุฑุบูุจ ูููุง
- **ุฅุถุงูุฉ ุณุฌูุงุช**: ุฅูุดุงุก ุณุฌูุงุช ุฌุฏูุฏุฉ

#### 3. ุงุณุชุนูุงูุงุช ูุฎุตุตุฉ (Custom Queries)
- ุชูููุฐ ุงุณุชุนูุงูุงุช SQL ูุฎุตุตุฉ
- ุนุฑุถ ุงููุชุงุฆุฌ ูู ุฌุฏูู ููุณู
- ุฏุนู ุงุณุชุนูุงูุงุช SELECT ููุท ููุฃูุงู

#### 4. ุชุตุฏูุฑ ุงูุจูุงูุงุช (Data Export)
- ุชุตุฏูุฑ ุฃู ุฌุฏูู ุจุตูุบุฉ JSON
- ุชูุฒูู ุงูุจูุงูุงุช ูุจุงุดุฑุฉ

### Tables Managed / ุงูุฌุฏุงูู ุงููุฏุงุฑุฉ

1. **users** - ุงููุณุชุฎุฏููู
   - ุงูุญุณุงุจุงุช ูุงูุตูุงุญูุงุช
   - ูุนูููุงุช ุงููุณุชุฎุฏููู

2. **subjects** - ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ
   - ุงูููุงุฏ ุงูุชุนููููุฉ

3. **lessons** - ุงูุฏุฑูุณ
   - ูุญุชูู ุงูุฏุฑูุณ

4. **exercises** - ุงูุชูุงุฑูู
   - ุงูุฃุณุฆูุฉ ูุงูุชูุงุฑูู

5. **submissions** - ุงูุฅุฌุงุจุงุช ุงูููุฏูุฉ
   - ุฅุฌุงุจุงุช ุงูุทูุงุจ

6. **missions** - ุงูููุงู
   - ููุงู Overmind

7. **mission_plans** - ุฎุทุท ุงูููุงู
   - ุงูุชุฎุทูุท ูุงูุงุณุชุฑุงุชูุฌูุงุช

8. **tasks** - ุงูููุงู ุงููุฑุนูุฉ
   - ุงูููุงู ุงููุฑุฏูุฉ

9. **mission_events** - ุฃุญุฏุงุซ ุงูููุงู
   - ุณุฌู ุงูุฃุญุฏุงุซ

10. **admin_conversations** - ูุญุงุฏุซุงุช ุงูุฃุฏูู
    - ุงููุญุงุฏุซุงุช ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู

11. **admin_messages** - ุฑุณุงุฆู ุงููุญุงุฏุซุงุช
    - ุงูุฑุณุงุฆู ุงููุฑุฏูุฉ

### API Endpoints

#### Get All Tables
```
GET /admin/api/database/tables
```

#### Get Database Stats
```
GET /admin/api/database/stats
```

#### Get Table Data
```
GET /admin/api/database/table/<table_name>?page=1&per_page=50
```

#### Get Single Record
```
GET /admin/api/database/record/<table_name>/<record_id>
```

#### Create Record
```
POST /admin/api/database/record/<table_name>
Content-Type: application/json

{
  "field1": "value1",
  "field2": "value2"
}
```

#### Update Record
```
PUT /admin/api/database/record/<table_name>/<record_id>
Content-Type: application/json

{
  "field1": "new_value1"
}
```

#### Delete Record
```
DELETE /admin/api/database/record/<table_name>/<record_id>
```

#### Execute Query
```
POST /admin/api/database/query
Content-Type: application/json

{
  "sql": "SELECT * FROM users WHERE is_admin = true"
}
```

#### Export Table
```
GET /admin/api/database/export/<table_name>
```

### Usage / ุงูุงุณุชุฎุฏุงู

#### 1. ุงููุตูู ุฅูู ุตูุญุฉ ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```
URL: /admin/database
```
ูุฌุจ ุฃู ุชููู ูุณุฌู ุฏุฎูู ููุณุคูู (is_admin = true)

#### 2. ุงุฎุชูุงุฑ ุฌุฏูู
- ุงููุฑ ุนูู ุงุณู ุงูุฌุฏูู ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
- ุณูุชู ุนุฑุถ ุฌููุน ุงูุณุฌูุงุช

#### 3. ุชุนุฏูู ุณุฌู
- ุงููุฑ ุนูู ุฒุฑ ุงูุชุนุฏูู (โ๏ธ) ุจุฌูุงุฑ ุงูุณุฌู
- ูู ุจุชุนุฏูู ุงูุญููู
- ุงููุฑ ุนูู "Save"

#### 4. ุญุฐู ุณุฌู
- ุงููุฑ ุนูู ุฒุฑ ุงูุญุฐู (๐๏ธ)
- ุฃูุฏ ุงูุญุฐู

#### 5. ุชูููุฐ ุงุณุชุนูุงู ูุฎุตุต
- ุงููุฑ ุนูู "Custom Query"
- ุงูุชุจ ุงุณุชุนูุงู SQL
- ุงููุฑ ุนูู "Execute Query"

#### 6. ุชุตุฏูุฑ ุจูุงูุงุช
- ุงุฎุชุฑ ุงูุฌุฏูู
- ุงููุฑ ุนูู "Export"
- ุณูุชู ุชูุฒูู ููู JSON

### Security / ุงูุฃูุงู

1. **ูุตุงุฏูุฉ ุงููุณุคูู**: ุฌููุน ุงูููุงุท ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุณุคูู
2. **ุงุณุชุนูุงูุงุช ุขููุฉ**: ูุชู ูุจูู ุงุณุชุนูุงูุงุช SELECT ููุท
3. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก ูุน ุฑุณุงุฆู ูุงุถุญุฉ

### Environment Variables Required

ุชุฃูุฏ ูู ูุฌูุฏ ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ูู ููู .env:

```bash
# Database Configuration
DATABASE_PASSWORD=your_database_password
DATABASE_URL=postgresql://postgres:${DATABASE_PASSWORD}@db:5432/postgres

# Or for Supabase:
DATABASE_URL=postgresql://postgres.your-project:password@aws-0-region.pooler.supabase.com:5432/postgres

# Admin User
ADMIN_EMAIL=benmerahhoussam16@gmail.com
ADMIN_PASSWORD=1111
ADMIN_NAME="Houssam Benmerah"
```

### Screenshots

ูุนุฑุถ ูุงุฌูุฉ ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูู ุจุฒูุงุฑุฉ:
```
http://localhost:5000/admin/database
```

### File Structure

```
app/
โโโ services/
โ   โโโ database_service.py      # ุฎุฏูุฉ ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ admin/
โ   โโโ routes.py                # ููุงุท ููุงูุฉ API
โ   โโโ templates/
โ       โโโ database_management.html  # ูุงุฌูุฉ ุงููุณุชุฎุฏู
```

### Future Enhancements / ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

1. โ ุงูุจุญุซ ูุงูุชุตููุฉ ูู ุงูุจูุงูุงุช
2. โ ูุฑุฒ ุงูุฃุนูุฏุฉ
3. โ ุชุตุฏูุฑ ุจุตูุบ ูุชุนุฏุฏุฉ (CSV, Excel)
4. โ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช
5. โ ูุณุฎ ุงุญุชูุงุทู ูุงุณุชุนุงุฏุฉ
6. โ ุณุฌู ุงูุชุบููุฑุงุช (Audit Log)
7. โ ุฅุฏุงุฑุฉ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู
8. โ ูุญุฑุฑ ูุชูุฏู ููุญููู JSON

### Support

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- ุงูุชุญ Issue ุนูู GitHub
- ุฑุงุณู ุงููุทูุฑ

### License

ูุฐุง ุงููุดุฑูุน ุฌุฒุก ูู CogniForge ููุฎุถุน ูููุณ ุงูุชุฑุฎูุต.

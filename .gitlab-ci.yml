# .gitlab-ci.yml
# ======================================================================================
# ==          GitLab CI Pipeline - Mirrored from GitHub                            ==
# ======================================================================================
# This repository is synced from GitHub to GitLab automatically
# Main CI/CD happens on GitHub to save GitLab resources
# This file runs basic verification only
# ======================================================================================

stages:
  - verify
  - test

variables:
  # Use Python 3.12
  PYTHON_VERSION: "3.12"
  PIP_CACHE_DIR: "$CI_PROJECT_DIR/.cache/pip"

# Cache pip packages
cache:
  paths:
    - .cache/pip

# Basic verification job
verify_sync:
  stage: verify
  image: python:3.12-slim
  script:
    - echo "‚úÖ Repository synced successfully from GitHub"
    - echo "üìä Commit: $CI_COMMIT_SHA"
    - echo "üåø Branch: $CI_COMMIT_REF_NAME"
    - python --version
  only:
    - branches
    - tags

# Optional: Run basic tests if needed
basic_tests:
  stage: test
  image: python:3.12-slim
  before_script:
    - pip install --upgrade pip
    - pip install -r requirements.txt
  script:
    - echo "üß™ Running basic tests..."
    - python -m pytest tests/ -v --tb=short || echo "‚ö†Ô∏è Tests completed with warnings"
  environment:
    name: gitlab-mirror
  only:
    - main
  # Allow failure since main testing is on GitHub
  allow_failure: true

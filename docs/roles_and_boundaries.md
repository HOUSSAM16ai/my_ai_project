# فصل الأدوار والحدود (Roles & Boundaries)

## الهدف
ضمان فصل صارم بين مسار الزبون ومسار الأدمن في الدردشة:
- الزبون: تعليم فقط.
- الأدمن: هندسي/إداري كامل الصلاحيات.

## الطبقات المعمارية
1) **Role Dispatch**
   - نقطة قرار واحدة تعتمد الدور فقط.
   - المسار يتجه إلى حدود الأدمن أو حدود الزبون دون أي اختلاط.

2) **Boundaries**
   - `AdminChatBoundaryService`: يحقن سياق الأدمن ويستخدم قدرات الأدمن.
   - `CustomerEducationChatBoundaryService`: يحقن سياق التعليم ويمنع الأدوات الحساسة.

3) **Policy Gate**
   - يسمح بالأسئلة التعليمية.
   - يمنع الطلبات الحساسة (الأسرار/البيئة/الأدوات/العمليات الإدارية).

4) **Tool Authorization**
   - قائمة سماح خاصة بكل دور.
   - الزبون لا يمتلك أي أدوات حساسة.

## قواعد التشغيل
- لا يجوز استدعاء حدود الأدمن إلا عبر بوابة التفريع.
- مسار الزبون لا يستخدم أي أدوات إدارية أو سياقات سرية.
- أي محاولة لتجاوز الدور تُسجّل في سجلات التدقيق.


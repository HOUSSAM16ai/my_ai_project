# Architecture Overview

> هدف هذا المستند: شرح المعمارية بلغة بسيطة ومباشرة للمطورين الجدد.

## 1) المبادئ الأساسية

- **API-First:** العقد (OpenAPI) هو المصدر الأساسي للحقيقة.
- **حدود صارمة بين الخدمات:** لا استيراد مباشر بين الخدمات.
- **نواة مشتركة محدودة:** فقط `app/core` مسموح بها كمكتبة مشتركة.

## 2) خريطة الطبقات القياسية لكل خدمة

```
/api        -> واجهة HTTP (Routers/Controllers)
/domain     -> الكيانات + قواعد العمل
/use_cases  -> حالات الاستخدام (تطبيق قواعد العمل)
/infra      -> قواعد البيانات/الرسائل/الخدمات الخارجية
/tests      -> اختبارات تعكس بنية المصدر
```

## 3) تدفق الطلب (Request Flow)

```
Client -> API Router -> Use Case -> Domain -> Infra -> Response
```

- **API Router**: يترجم الطلب إلى مدخلات واضحة.
- **Use Case**: ينفذ السيناريو التجاري.
- **Domain**: قواعد العمل الصافية (بدون I/O).
- **Infra**: الوصول إلى قواعد البيانات والخدمات الخارجية.

## 4) سياسات الجودة والاختبارات

- اقرأ `docs/quality/standards.md` لفهم القواعد الصارمة.
- اقرأ `docs/quality/testing.md` لفهم سياسة التغطية 100%.

## 5) توجيه للمبتدئين

- ابدأ بتتبع أي ميزة عبر الطبقات الخمس.
- لا تضف منطقًا تجاريًا داخل طبقة API.
- أي تواصل بين الخدمات يكون عبر HTTP أو Event Bus فقط.

# ๐ ูุฑุฌุน ุณุฑูุน ููุฌุฏุงูู - Database Tables Quick Reference

## ูุธุฑุฉ ุนุงูุฉ / Overview
ูุฐุง ุงููุณุชูุฏ ูุญุชูู ุนูู ูุงุฆูุฉ ูุงููุฉ ุจุฌููุน ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ุดุฑุญ ูุฎุชุตุฑ ููู ุฌุฏูู.

---

## ๐ ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ (Core Tables)

### 1. ๐ค users - ุฌุฏูู ุงููุณุชุฎุฏููู
**ุงููุธููุฉ**: ุชุฎุฒูู ูุนูููุงุช ุญุณุงุจุงุช ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงููุณุชุฎุฏู (Primary Key)
- `full_name` - ุงูุงุณู ุงููุงูู
- `email` - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุฑูุฏ)
- `password_hash` - ูููุฉ ุงููุฑูุฑ ุงููุดูุฑุฉ
- `is_admin` - ูู ุงููุณุชุฎุฏู ูุณุคููุ
- `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก
- `updated_at` - ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ

**ุงูุงุณุชุฎุฏุงู**: ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏูููุ ุชุณุฌูู ุงูุฏุฎููุ ุงูุตูุงุญูุงุช

---

### 2. ๐ subjects - ุฌุฏูู ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ
**ุงููุธููุฉ**: ุชุฎุฒูู ุงูููุงุฏ ูุงูููุฑุฑุงุช ุงูุชุนููููุฉ

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงููุงุฏุฉ
- `name` - ุงุณู ุงููุงุฏุฉ
- `description` - ูุตู ุงููุงุฏุฉ
- `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก

**ุงูุงุณุชุฎุฏุงู**: ุชูุธูู ุงููุญุชูู ุงูุชุนููููุ ุชุตููู ุงูุฏุฑูุณ

---

### 3. ๐ lessons - ุฌุฏูู ุงูุฏุฑูุณ
**ุงููุธููุฉ**: ุชุฎุฒูู ุงูุฏุฑูุณ ูุงููุญุชูู ุงูุชุนูููู

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงูุฏุฑุณ
- `subject_id` - ูุนุฑู ุงููุงุฏุฉ (Foreign Key)
- `title` - ุนููุงู ุงูุฏุฑุณ
- `content` - ูุญุชูู ุงูุฏุฑุณ
- `order` - ุชุฑุชูุจ ุงูุฏุฑุณ
- `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก

**ุงูุงุณุชุฎุฏุงู**: ุฅุฏุงุฑุฉ ุงูุฏุฑูุณุ ุนุฑุถ ุงููุญุชูู ุงูุชุนูููู

---

### 4. โ๏ธ exercises - ุฌุฏูู ุงูุชูุงุฑูู
**ุงููุธููุฉ**: ุชุฎุฒูู ุงูุชูุงุฑูู ูุงูุฃุณุฆูุฉ

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงูุชูุฑูู
- `lesson_id` - ูุนุฑู ุงูุฏุฑุณ (Foreign Key)
- `question` - ูุต ุงูุณุคุงู
- `answer` - ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ
- `type` - ููุน ุงูุณุคุงู
- `difficulty` - ูุณุชูู ุงูุตุนูุจุฉ
- `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก

**ุงูุงุณุชุฎุฏุงู**: ุฅุฏุงุฑุฉ ุงูุฃุณุฆูุฉุ ุงูุชููููุ ุงูุงุฎุชุจุงุฑุงุช

---

### 5. ๐ submissions - ุฌุฏูู ุงูุฅุฌุงุจุงุช
**ุงููุธููุฉ**: ุชุฎุฒูู ุฅุฌุงุจุงุช ูุชูุฏููุงุช ุงูุทูุงุจ

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงูุฅุฌุงุจุฉ
- `user_id` - ูุนุฑู ุงูุทุงูุจ (Foreign Key)
- `exercise_id` - ูุนุฑู ุงูุชูุฑูู (Foreign Key)
- `answer` - ุฅุฌุงุจุฉ ุงูุทุงูุจ
- `score` - ุงููุชูุฌุฉ
- `submitted_at` - ุชุงุฑูุฎ ุงูุชูุฏูู

**ุงูุงุณุชุฎุฏุงู**: ุชุชุจุน ุฅุฌุงุจุงุช ุงูุทูุงุจุ ุงูุชููููุ ุงูุฅุญุตุงุฆูุงุช

---

## ๐ฏ ุฌุฏุงูู Overmind (AI System Tables)

### 6. ๐ฏ missions - ุฌุฏูู ุงูููุงู ุงูุฑุฆูุณูุฉ
**ุงููุธููุฉ**: ุชุฎุฒูู ุงูููุงู ูุงูุฃูุฏุงู ุงูุฑุฆูุณูุฉ ููุฐูุงุก ุงูุงุตุทูุงุนู

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงููููุฉ
- `objective` - ูุฏู ุงููููุฉ
- `status` - ุญุงูุฉ ุงููููุฉ (PENDING, RUNNING, SUCCESS, FAILED, etc.)
- `initiator_id` - ูุนุฑู ุงููุณุชุฎุฏู ุงูุฐู ุฃูุดุฃ ุงููููุฉ (Foreign Key)
- `active_plan_id` - ูุนุฑู ุงูุฎุทุฉ ุงููุดุทุฉ (Foreign Key)
- `result_summary` - ููุฎุต ุงููุชูุฌุฉ
- `locked` - ูู ุงููููุฉ ููููุฉุ
- `total_cost_usd` - ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
- `adaptive_cycles` - ุนุฏุฏ ุฏูุฑุงุช ุงูุชููู
- `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก

**ุงูุงุณุชุฎุฏุงู**: ุฅุฏุงุฑุฉ ููุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ุชุชุจุน ุงูุชูุฏู

---

### 7. ๐ mission_plans - ุฌุฏูู ุฎุทุท ุงูููุงู
**ุงููุธููุฉ**: ุชุฎุฒูู ุฎุทุท ุชูููุฐ ุงูููุงู ุงููุฎุชููุฉ

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงูุฎุทุฉ
- `mission_id` - ูุนุฑู ุงููููุฉ (Foreign Key)
- `version` - ุฑูู ุฅุตุฏุงุฑ ุงูุฎุทุฉ
- `planner_name` - ุงุณู ุงููุฎุทุท (AI Model)
- `status` - ุญุงูุฉ ุงูุฎุทุฉ (DRAFT, VALID, SUPERSEDED, FAILED)
- `score` - ุชูููู ุงูุฎุทุฉ
- `rationale` - ุงูุชุจุฑูุฑ
- `raw_json` - ุงูุจูุงูุงุช ุงูุฎุงู (JSON)
- `stats_json` - ุงูุฅุญุตุงุฆูุงุช (JSON)
- `content_hash` - ุชุฌุฒุฆุฉ ุงููุญุชูู

**ุงูุงุณุชุฎุฏุงู**: ุฅุฏุงุฑุฉ ุฎุทุท ุงูููุงูุ ุงูููุงุฑูุฉ ุจูู ุงูุฎุทุท

---

### 8. โ tasks - ุฌุฏูู ุงูููุงู ุงููุฑุนูุฉ
**ุงููุธููุฉ**: ุชุฎุฒูู ุงูููุงู ุงููุฑุนูุฉ ูุงูุฎุทูุงุช ุงูุชูุตูููุฉ

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงููููุฉ ุงููุฑุนูุฉ
- `mission_id` - ูุนุฑู ุงููููุฉ ุงูุฑุฆูุณูุฉ (Foreign Key)
- `plan_id` - ูุนุฑู ุงูุฎุทุฉ (Foreign Key)
- `task_key` - ููุชุงุญ ุงููููุฉ
- `description` - ูุตู ุงููููุฉ
- `task_type` - ููุน ุงููููุฉ (TOOL, SYSTEM, META, VERIFICATION)
- `tool_name` - ุงุณู ุงูุฃุฏุงุฉ
- `tool_args_json` - ูุนุงููุงุช ุงูุฃุฏุงุฉ (JSON)
- `status` - ุญุงูุฉ ุงููููุฉ (PENDING, RUNNING, SUCCESS, FAILED, RETRY, SKIPPED)
- `priority` - ุงูุฃููููุฉ
- `risk_level` - ูุณุชูู ุงููุฎุงุทุฑุฉ
- `attempt_count` - ุนุฏุฏ ุงููุญุงููุงุช
- `result_text` - ูุต ุงููุชูุฌุฉ
- `result_meta_json` - ูุนูููุงุช ุฅุถุงููุฉ ุนู ุงููุชูุฌุฉ (JSON)
- `started_at` - ููุช ุงูุจุฏุก
- `finished_at` - ููุช ุงูุงูุชูุงุก
- `duration_ms` - ุงููุฏุฉ ุจุงููููู ุซุงููุฉ

**ุงูุงุณุชุฎุฏุงู**: ุชูููุฐ ุงูููุงูุ ุชุชุจุน ุงูุชูุฏู ุงูุชูุตููู

---

### 9. ๐ mission_events - ุฌุฏูู ุฃุญุฏุงุซ ุงูููุงู
**ุงููุธููุฉ**: ุชุฎุฒูู ุณุฌู ุงูุฃุญุฏุงุซ ูุงูุชุบููุฑุงุช ูู ุงูููุงู

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงูุญุฏุซ
- `mission_id` - ูุนุฑู ุงููููุฉ (Foreign Key)
- `task_id` - ูุนุฑู ุงููููุฉ ุงููุฑุนูุฉ (Foreign Keyุ ุงุฎุชูุงุฑู)
- `event_type` - ููุน ุงูุญุฏุซ (CREATED, STATUS_CHANGE, TASK_COMPLETED, etc.)
- `payload` - ุจูุงูุงุช ุงูุญุฏุซ (JSON)
- `note` - ููุงุญุธุฉ
- `created_at` - ุชุงุฑูุฎ ุงูุญุฏุซ

**ุงูุงุณุชุฎุฏุงู**: ุชุชุจุน ุชุงุฑูุฎ ุงููููุฉุ ุงูุชุญูููุ ุงููุฑุงูุจุฉ

---

## ๐ฌ ุฌุฏุงูู ุงูุฃุฏูู (Admin Tables)

### 10. ๐ฌ admin_conversations - ุฌุฏูู ูุญุงุฏุซุงุช ุงูุฃุฏูู
**ุงููุธููุฉ**: ุชุฎุฒูู ูุญุงุฏุซุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุน ุงูุฅุฏุงุฑุฉ

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงููุญุงุฏุซุฉ
- `user_id` - ูุนุฑู ุงููุณุชุฎุฏู (Foreign Key)
- `title` - ุนููุงู ุงููุญุงุฏุซุฉ
- `status` - ุญุงูุฉ ุงููุญุงุฏุซุฉ
- `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก
- `updated_at` - ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ

**ุงูุงุณุชุฎุฏุงู**: ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู

---

### 11. ๐ admin_messages - ุฌุฏูู ุฑุณุงุฆู ุงูุฃุฏูู
**ุงููุธููุฉ**: ุชุฎุฒูู ุฑุณุงุฆู ุงููุญุงุฏุซุงุช ุงูุชูุตูููุฉ

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `id` - ูุนุฑู ุงูุฑุณุงูุฉ
- `conversation_id` - ูุนุฑู ุงููุญุงุฏุซุฉ (Foreign Key)
- `role` - ุฏูุฑ ุงููุฑุณู (user, assistant, system, tool)
- `content` - ูุญุชูู ุงูุฑุณุงูุฉ
- `metadata` - ูุนูููุงุช ุฅุถุงููุฉ (JSON)
- `created_at` - ุชุงุฑูุฎ ุงูุฅุฑุณุงู

**ุงูุงุณุชุฎุฏุงู**: ุชุฎุฒูู ุณุฌู ุงููุญุงุฏุซุงุชุ ุงูุณูุงู

---

## ๐ง ุฌุฏุงูู ุงููุธุงู (System Tables)

### 12. ๐ alembic_version - ุฌุฏูู ุฅุตุฏุงุฑุงุช ุงููุฌุฑุงุช
**ุงููุธููุฉ**: ุชุชุจุน ุฅุตุฏุงุฑุงุช ูุฌุฑุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุฃุนูุฏุฉ ุงูุฑุฆูุณูุฉ**:
- `version_num` - ุฑูู ุฅุตุฏุงุฑ ุงููุฌุฑุฉ (Primary Key)

**ุงูุงุณุชุฎุฏุงู**: ุฅุฏุงุฑุฉ ุงููุฌุฑุงุชุ ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑุงุช

---

## ๐ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู (Table Relationships)

### ุนูุงูุงุช ุงููุณุชุฎุฏููู:
- `users` โ `missions` (ูุณุชุฎุฏู ูุงุญุฏ โ ููุงู ูุชุนุฏุฏุฉ)
- `users` โ `submissions` (ูุณุชุฎุฏู ูุงุญุฏ โ ุฅุฌุงุจุงุช ูุชุนุฏุฏุฉ)
- `users` โ `admin_conversations` (ูุณุชุฎุฏู ูุงุญุฏ โ ูุญุงุฏุซุงุช ูุชุนุฏุฏุฉ)

### ุนูุงูุงุช ุงููุญุชูู ุงูุชุนูููู:
- `subjects` โ `lessons` (ูุงุฏุฉ ูุงุญุฏุฉ โ ุฏุฑูุณ ูุชุนุฏุฏุฉ)
- `lessons` โ `exercises` (ุฏุฑุณ ูุงุญุฏ โ ุชูุงุฑูู ูุชุนุฏุฏุฉ)
- `exercises` โ `submissions` (ุชูุฑูู ูุงุญุฏ โ ุฅุฌุงุจุงุช ูุชุนุฏุฏุฉ)

### ุนูุงูุงุช Overmind:
- `missions` โ `mission_plans` (ูููุฉ ูุงุญุฏุฉ โ ุฎุทุท ูุชุนุฏุฏุฉ)
- `missions` โ `tasks` (ูููุฉ ูุงุญุฏุฉ โ ููุงู ูุฑุนูุฉ ูุชุนุฏุฏุฉ)
- `missions` โ `mission_events` (ูููุฉ ูุงุญุฏุฉ โ ุฃุญุฏุงุซ ูุชุนุฏุฏุฉ)
- `mission_plans` โ `tasks` (ุฎุทุฉ ูุงุญุฏุฉ โ ููุงู ูุชุนุฏุฏุฉ)
- `tasks` โ `mission_events` (ูููุฉ ูุฑุนูุฉ ูุงุญุฏุฉ โ ุฃุญุฏุงุซ ูุชุนุฏุฏุฉ)
- `tasks` โ `tasks` (ูููุฉ ุชุนุชูุฏ ุนูู ููุงู ุฃุฎุฑู - task_dependencies)

### ุนูุงูุงุช ุงูุฃุฏูู:
- `admin_conversations` โ `admin_messages` (ูุญุงุฏุซุฉ ูุงุญุฏุฉ โ ุฑุณุงุฆู ูุชุนุฏุฏุฉ)

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงููููุฐุฌูุฉ (Typical Statistics)

| ุงูุฌุฏูู / Table | ุงููุฆุฉ / Category | ุงูุณุฌูุงุช ุงููุชููุนุฉ / Expected Records |
|----------------|------------------|-------------------------------------|
| users | Core | 10-1000 |
| subjects | Core | 5-50 |
| lessons | Core | 20-500 |
| exercises | Core | 100-10000 |
| submissions | Core | 500-100000 |
| missions | Overmind | 10-1000 |
| mission_plans | Overmind | 20-2000 |
| tasks | Overmind | 100-10000 |
| mission_events | Overmind | 200-50000 |
| admin_conversations | Admin | 5-100 |
| admin_messages | Admin | 50-1000 |
| alembic_version | System | 1-20 |

---

## ๐ฏ ุงูุงุณุชุฎุฏุงูุงุช ุงูุดุงุฆุนุฉ (Common Use Cases)

### 1. ุชุชุจุน ุชูุฏู ุงูุทุงูุจ
```sql
SELECT u.full_name, COUNT(s.id) as total_submissions, 
       AVG(s.score) as average_score
FROM users u
LEFT JOIN submissions s ON u.id = s.user_id
GROUP BY u.id, u.full_name;
```

### 2. ุนุฑุถ ููุงู ูุดุทุฉ
```sql
SELECT m.id, m.objective, m.status, COUNT(t.id) as total_tasks,
       SUM(CASE WHEN t.status = 'SUCCESS' THEN 1 ELSE 0 END) as completed_tasks
FROM missions m
LEFT JOIN tasks t ON m.id = t.mission_id
WHERE m.status IN ('RUNNING', 'PLANNED')
GROUP BY m.id;
```

### 3. ุชุญููู ุฃุฏุงุก ุงูุฐูุงุก ุงูุงุตุทูุงุนู
```sql
SELECT DATE(m.created_at) as date, 
       COUNT(*) as total_missions,
       SUM(CASE WHEN m.status = 'SUCCESS' THEN 1 ELSE 0 END) as successful,
       AVG(m.total_cost_usd) as avg_cost
FROM missions m
GROUP BY DATE(m.created_at)
ORDER BY date DESC;
```

---

## ๐ ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ (Helper Tools)

### ุนุฑุถ ุฌููุน ุงูุฌุฏุงูู
```bash
python3 list_database_tables.py
```

### ุงูุชุญูู ูู ุญุงูุฉ ุงููุฌุฑุงุช
```bash
python3 check_migrations_status.py
```

### ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูููุจ
```
http://localhost:5000/admin/database
```

---

## ๐ ุงููุฑุงุฌุน (References)

- `DATABASE_MANAGEMENT.md` - ุฏููู ุดุงูู ูุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `DATABASE_GUIDE_AR.md` - ุฏููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุนุฑุจูุฉ
- `DATABASE_TABLES_README_AR.md` - ุฏููู ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุชุงุช
- `DATABASE_TABLES_OUTPUT_EXAMPLE.md` - ุฃูุซูุฉ ุนูู ุงููุฎุฑุฌุงุช
- `app/models.py` - ุชุนุฑููุงุช ุงูููุงุฐุฌ ุงููุงููุฉ

---

**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงูุชุงุฑูุฎ**: 2024  
**ุงููุคูู**: CogniForge System  
**ุขุฎุฑ ุชุญุฏูุซ**: ุฃูุชูุจุฑ 2024

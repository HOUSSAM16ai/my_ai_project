# ๐ฏ ูุธุงู ุงูุชูุณูู ุงูุฐุงุชู ุงูุฅุตูุงุญ - ุฏููู ูุงูู

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทุจูู **ูุธุงู ุชูุณูู ุงูููุฏ ุงูุฐุงุชู ุงูุฅุตูุงุญ** ุงูุฐู ูุถูู:
- โ ุฅุตูุงุญ ูุดุงูู ุงูุชูุณูู ุชููุงุฆูุงู ูู ุงูู PRs (ูุง ูุฒูุฏ ูู โ)
- โ ุงูุญูุงุธ ุนูู ูุนุงููุฑ ุฌูุฏุฉ ุตุงุฑูุฉ ูู ุงููุฑูุน ุงููุญููุฉ
- โ ุฃุฏูุงุช ููุญุฏุฉ ูููุทูุฑูู ูุญููุงู
- โ ุตูุฑ ุชุฏุฎู ูุฏูู ููุชูุณูู

## ๐ง ูููุทูุฑูู

### ุงูุฃูุงูุฑ ุงูุณุฑูุนุฉ

```bash
# ุชูุณูู ุชููุงุฆู ููู ุงูููุฏ (ููุณุชุญุณู ูุจู ุงูููููุช)
make format

# ูุญุต ุงูุชูุณูู ุฏูู ุชุบููุฑุงุช
make check

# ุชุดุบูู ุฃุฏูุงุช ุงููุญุต
make lint

# ุชุซุจูุช pre-commit hooks (ูุฑุฉ ูุงุญุฏุฉ)
pip install pre-commit
pre-commit install
```

### Pre-commit Hooks

ููู `.pre-commit-config.yaml` ูููุณู ุงูููุฏ ุชููุงุฆูุงู ูุจู ูู ููููุช:

- **Black 24.10.0**: ููุณู ููุฏ Python
- **Ruff 0.6.9**: ุฃุฏุงุฉ ูุญุต Python ูุงุฆูุฉ ุงูุณุฑุนุฉ
- ูุนูู ุชููุงุฆูุงู ุนูุฏ `git commit`
- ูููุน ุฏุฎูู ููุฏ ุบูุฑ ููุณู ููุฑูุจู

**ุงูุชุซุจูุช:**
```bash
pip install pre-commit
pre-commit install
```

## ๐ค ุณูุฑ ุนูู CI/CD

### 1. ุฅุตูุงุญ ุชููุงุฆู ููู PR (python-autofix.yml)

**ุงูููุดุบููุงุช:** Pull requests (ูุชุญุ ูุฒุงููุฉุ ุฅุนุงุฏุฉ ูุชุญ)

**ูุงุฐุง ููุนู:**
1. ูุณุญุจ ูุฑุน ุงูู PR
2. ููุดุบูู Black ู Ruff ูุชูุณูู ุงูููุฏ
3. ููุฑุณูู ุงูููููุช ูููุฑุน (ุฅุฐุง ููุฌุฏุช ุชุบููุฑุงุช)
4. โ ุงูู PR ููุฑุฑ ูุญูุตุงุช ุงูุชูุณูู ุฏุงุฆูุงู

**ุงูููุงุฆุฏ:**
- ูุง ุชูุณูู ูุฏูู ูุทููุจ
- ูุง ูุดู ูู ุงููุญูุตุงุช ุจุณุจุจ ุงูุชูุณูู
- ููุท ููุฏ ููุญุฏ ุนุจุฑ ูู ุงูู PRs

### 2. ุงูุชุญูู ูู ุงููุฑูุน ุงููุญููุฉ (python-verify.yml)

**ุงูููุดุบููุงุช:** Push ููุฑูุน `main` ุฃู `release/**`

**ูุงุฐุง ููุนู:**
1. ูุณุญุจ ุงูููุฏ
2. ููุดุบูู Black --check (ูุง ุชุบููุฑุงุช)
3. ููุดุบูู Ruff check (ูุญุต ููุท)
4. โ ููุดู ุฅุฐุง ุงูููุฏ ูุง ููุทุงุจู ุงููุนุงููุฑ

**ุงูููุงุฆุฏ:**
- ูุถูู ุฃู ูุฑุน main ูุญุชูู ููุฏ ููุณู ุฏุงุฆูุงู
- ูููุน Push ูุจุงุดุฑ ุจุฏูู ุชูุณูู ุนู ุทุฑูู ุงูุฎุทุฃ
- ููุญุงูุธ ุนูู ูุนุงููุฑ ุฌูุฏุฉ ุงูููุฏ

## โ๏ธ ูููุงุช ุงูุฅุนุฏุงุฏุงุช

### pyproject.toml

**ุฅุนุฏุงุฏุงุช Black:**
```toml
[tool.black]
line-length = 100
target-version = ["py311"]
exclude = '''
(
  /(\.git|\.venv|\.mypy_cache|\.ruff_cache|build|dist|node_modules)/
  | ^.*/__pycache__/
)
'''
```

**ุฅุนุฏุงุฏุงุช Ruff:**
```toml
[tool.ruff]
line-length = 100
target-version = "py311"

[tool.ruff.lint]
select = ["E", "F", "I", "UP"]
ignore = [
  "E501",  # ุงูุณุทุฑ ุทููู ุฌุฏุงู (ููุนุงูุฌ ุจูุงุณุทุฉ black)
  "E722",  # Bare except (ููุตูุฏ ูู ุงูููุฏ)
  "E741",  # ุงุณู ูุชุบูุฑ ุบุงูุถ (ููุตูุฏ)
]
```

### ุฃูุงูุฑ Makefile

**ุงูุฃูุงูุฑ ุงููุชุงุญุฉ:**
```makefile
make format    # ุชูุณูู ุชููุงุฆู ุจู black + ruff
make lint      # ุชุดุบูู ruff linter
make check     # ูุญุต ุงูุชูุณูู ุจุฏูู ุชุบููุฑุงุช
```

## ๐ ุงูุญุงูุฉ ุงูุญุงููุฉ

### ุชุบุทูุฉ ุงูุชูุณูู
- **181 ููู** ููุณู ูููุฑุฑ ุงููุญูุตุงุช
- **100% ูุชูุงูู ูุน Black**
- **0 ุฃุฎุทุงุก Ruff** (ุจุนุฏ ุชุฌุงูู ุงูุฃููุงุท ุงูููุตูุฏุฉ)

### ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ
```bash
$ make check
โ Checking code formatting (no changes)...
black --check .
All done! โจ ๐ฐ โจ
181 files would be left unchanged.

ruff check .
All checks passed!
โ Code formatting check passed!
```

## ๐ ุฃูุซูุฉ ุนูู ุณูุฑ ุงูุนูู

### ูุซุงู 1: ูุทููุฑ ููุฌุฑู ุชุนุฏููุงุช

1. ุงููุทููุฑ ููุนุฏูู ุงูููุฏ ูุญููุงู
2. ููุดุบูู `make format` (ุฃู pre-commit hook ููุณู ุชููุงุฆูุงู)
3. ููุฑุณูู ููููุช ู Push ููู PR
4. ุงูู CI ููุดุบูู `python-autofix.yml`
5. ุฃู ุชูุณูู ููุณู ููุตูุญ ุชููุงุฆูุงู ูููุฑุณูู ููููุช
6. โ ุงูู PR ููุฑุฑ ูู ุงููุญูุตุงุช

### ูุซุงู 2: Push ูุจุงุดุฑ ูู Main (ูุญูู)

1. ุงููุทููุฑ ููุญุงูู Push ูู main
2. ุญูุงูุฉ ุงููุฑุน ุชุชุทูุจ `python-verify` ุฃู ููุฑุฑ
3. ุงูู CI ููุดุบูู `python-verify.yml` (ูุถุน ูุญุต ููุท)
4. ุฅุฐุง ููุฌุฏุช ูุดุงูู ุชูุณููุ ุงูุจููุงุก ููุดู โ
5. ุงููุทููุฑ ูุฌุจ ุฃู ููุณู ูุญููุงู ู ููุฑุณูู Push ูุฑุฉ ุฃุฎุฑู
6. ูุถูู ุฃู main ุฏุงุฆูุงู ูุฏูู ุชูุณูู ูุซุงูู

## ๐ก๏ธ ุฅุนุฏุงุฏ ุญูุงูุฉ ุงููุฑุน

ููุฑุถ ูุฐู ุงููุนุงููุฑุ ุงุถุจุท ุญูุงูุฉ ุงููุฑุน ุนูู `main`:

**Settings โ Branches โ Branch protection rules:**

1. **Require status checks to pass before merging**
   - โ `python-verify`
   
2. **Require branches to be up to date before merging**
   - โ ูููุนูู

3. **Do not allow bypassing the above settings**
   - โ Include administrators

## ๐ ุดุฑุญ ุงูููุงุนุฏ ุงููุชุฌุงููุฉ

### E501: ุงูุณุทุฑ ุทููู ุฌุฏุงู
- **ููุงุฐุง:** Black ููุนุงูุฌ ุทูู ุงูุณุทุฑ ุชููุงุฆูุงู
- **ุงููุงุฆุฏุฉ:** ุชุฌูุจ ุงูุชุนุงุฑุถุงุช ุจูู Black ู Ruff

### E722: Bare except
- **ููุงุฐุง:** ููุณุชุฎุฏู ุนูุฏุงู ููุชูุงุท ุฃุฎุทุงุก ูุงุณุน ูู ุณูุงูุงุช ูุญุฏุฏุฉ
- **ูุซุงู:** ุฃููุงุท ูุฑููุฉ ุงูุฎุฏูุฉุ ุงูุชุฏููุฑ ุงูุฑุดูู

### E741: ุงุณู ูุชุบูุฑ ุบุงูุถ
- **ููุงุฐุง:** ุงููุชุบูุฑ `l` ููุณุชุฎุฏู ูู "line" ูู comprehensions
- **ูุซุงู:** `sum(1 for l in lines if l.strip())`
- **ุงูุณูุงู:** ูุงุถุญ ูู ุงูุงุณุชุฎุฏุงูุ ููุณ ุบุงูุถุงู ูุนููุงู

## โจ ููุฎุต ุงูููุงุฆุฏ

### ูููุทูุฑูู
- โ ูุง ุชูุณูู ูุฏูู ูุทููุจ
- โ ููุท ููุฏ ููุญุฏ ุชููุงุฆูุงู
- โ ุชูุณูู ุณุฑูุน ูุญููุงู ุจู `make format`
- โ Pre-commit hooks ุชููุน ุงููุดุงูู ูุจูุฑุงู

### ููู CI/CD
- โ ุงูู PRs ูุง ุชูุดู ุฃุจุฏุงู ุจุณุจุจ ุงูุชูุณูู
- โ ุฅุตูุงุญ ุฐุงุชู ุจููููุชุงุช ุชููุงุฆูุฉ
- โ ุงููุฑูุน ุงููุญููุฉ ุชุจูู ูุธููุฉ
- โ ุตูุฑ ุตูุงูุฉ overhead

### ูุฌูุฏุฉ ุงูููุฏ
- โ 100% ุชูุณูู ููุญุฏ
- โ ุฃุฏูุงุช ูุนูุงุฑูุฉ ุตูุงุนูุฉ (Black, Ruff)
- โ ููุฏ ูุงุจู ูููุฑุงุกุฉ ูุงูุตูุงูุฉ
- โ ุชูููู ุงูุงุญุชูุงู ูู ูุฑุงุฌุนุฉ ุงูููุฏ

## ๐ ุฃูุถู ุงูููุงุฑุณุงุช

1. **ุฏุงุฆูุงู ุดุบูู `make format` ูุจู Push**
2. **ุซุจูุช pre-commit hooks ููุชูุณูู ุงูุชููุงุฆู**
3. **ูุง ุชููุณู ูุฏููุงู - ุฏุน Black ูุชุนุงูู ูุนู**
4. **ุซู ูู ุณูุฑ ุนูู ุงูุฅุตูุงุญ ุงูุชููุงุฆู ุนูู ุงูู PRs**
5. **ุงุญุชูุธ ุจุงูุฅุนุฏุงุฏุงุช ูู pyproject.toml**

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: Pre-commit hook ููุดู
**ุงูุญู:**
```bash
pip install --upgrade black==24.10.0 ruff==0.6.9
pre-commit install --install-hooks
```

### ูุดููุฉ: ุงููุญุต ุงููุญูู ููุดู ููู CI ููุฑุฑ
**ุงูุญู:**
```bash
# ุญุฏูุซ ุงูุฃุฏูุงุช ููุทุงุจูุฉ ูุณุฎ CI
pip install --upgrade black==24.10.0 ruff==0.6.9

# ุงูุณุญ ุงูู cache
rm -rf .ruff_cache .mypy_cache __pycache__

# ุฃุนุฏ ุชุดุบูู ุงููุญุต
make check
```

### ูุดููุฉ: ุงูููููุช ุงูุชููุงุฆู ูุง ูุนูู ุนูู PR
**ุงูุญู:**
- ุชุฃูุฏ ุฃู ุงูู workflow ูุฏูู ุฅุฐู `contents: write`
- ุชุญูู ุฅุฐุง ุงููุฑุน ูู fork (ุงูู forks ุชุญุชุงุฌ ููุฌ ูุฎุชูู)
- ุชุญูู ุฃู `stefanzweifel/git-auto-commit-action@v5` ููุนุฏ ุจุดูู ุตุญูุญ

---

**ุจููู ุจู โค๏ธ ูู ุทุฑู ุญุณุงู ุจู ูุฑุงุญ**

*ูุฐุง ุงููุธุงู ูุถูู ุฃู ููุฏู ููุณู ุฏุงุฆูุงู ุจุดูู ูุซุงููุ ุชููุงุฆูุงูุ ุจุฏูู ุฃู ุฌูุฏ ูุฏูู!*
